<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Yadoms</title><link rel="stylesheet" href="stats.b1bd35c2.css"></head><body> <div class="flex flex-col items-center"> <img src="yadoms.480c6c84.ico" alt="yadoms logo"> <h1 class="text-center">Yadoms statistics</h1> <div class="lg:px-40 px-4 w-full"> <canvas id="yadomsStats"></canvas> </div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.0/chart.min.js" integrity="sha512-asxKqQghC1oBShyhiBwA+YgotaSYKxGP1rcSYTDrB0U6DxwlJjU59B67U8+5/++uFjcuVM8Hh5cokLjZlhm3Vg==" crossorigin referrerpolicy="no-referrer"></script> <script>function getYadomsReleases(){return fetch("https://api.github.com/repos/Yadoms/yadoms/releases").then((e=>e.json())).then((e=>{let a=[];return e.map((e=>{let t={tag_name:e.tag_name,published_at:e.published_at,assets:e.assets?.map((e=>({created_at:e.created_at,browser_download_url:e.browser_download_url,name:e.name,download_count:e.download_count})))};a.push(t)})),a}))}let chartCategories=[],chartSeries=[],packageTypes=[],packageDataPerCategory=[];const randomNum=()=>Math.floor(184*Math.random()+52),randomRGB=()=>`rgb(${randomNum()}, ${randomNum()}, ${randomNum()})`;getYadomsReleases().then((e=>{for(let a of e){let e=a.tag_name;for(let t of a.assets){platformFilterRegex=/^Yadoms-(\d*\.\d*\.\d*(-.*)?)-(.*)$/g;let a=platformFilterRegex.exec(t.name);if(!a||4!==a.length)continue;const o=a[1],r=a[3];"1.0.0"!==o.substring(0,5)&&("RaspberryPI.tar.bz2"!==r&&(-1===chartCategories.indexOf(e)&&chartCategories.push(e),-1===packageTypes.indexOf(r)&&(packageTypes.push(r),packageDataPerCategory[r]=[]),packageDataPerCategory[r][e]=t.download_count))}}for(let e of packageTypes){let a=[];for(let t of chartCategories)a.push(packageDataPerCategory[e][t]||0);chartSeries.push({label:e,data:a,backgroundColor:`rgb(${randomNum()}, ${randomNum()}, ${randomNum()})`})}const a={type:"bar",data:{labels:chartCategories,datasets:chartSeries},options:{tooltips:{mode:"label"},responsive:!0,plugins:{legend:{position:"right"},title:{display:!0,text:"Downloads per versions"}},scales:{x:{stacked:!0},y:{stacked:!0}}}},t=document.getElementById("yadomsStats");new Chart(t,a)}));</script> </body></html>